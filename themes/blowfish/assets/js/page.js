var viewed, liked, liked_page = !1, id = oid ? oid.replaceAll("/", "-") : oid, id_likes = oid_likes ? oid_likes.replaceAll("/", "-") : oid_likes; function like_article(e) { auth.signInAnonymously().then(() => { db.collection("likes").doc(e).get().then(t => { liked_page = !0, localStorage.setItem(e, !0), document.querySelectorAll("span[id='button_likes_heart']")[0].style.display = "", document.querySelectorAll("span[id='button_likes_emtpty_heart']")[0].style.display = "none", document.querySelectorAll("span[id='button_likes_text']")[0].innerText = "", t.exists ? db.collection("likes").doc(e).update({ likes: firebase.firestore.FieldValue.increment(1) }) : db.collection("likes").doc(e).set({ likes: 1 }) }).catch(e => { console.log("Error getting document:", e) }) }).catch(e => { var t = e.code, l = e.message; console.error(t, l) }) } function remove_like_article(e) { auth.signInAnonymously().then(() => { db.collection("likes").doc(e).get().then(t => { liked_page = !1, localStorage.removeItem(e), document.querySelectorAll("span[id='button_likes_heart']")[0].style.display = "none", document.querySelectorAll("span[id='button_likes_emtpty_heart']")[0].style.display = "", document.querySelectorAll("span[id='button_likes_text']")[0].innerText = "\xa0Like", t.exists ? db.collection("likes").doc(e).update({ likes: firebase.firestore.FieldValue.increment(-1) }) : db.collection("likes").doc(e).set({ likes: 0 }) }).catch(e => { console.log("Error getting document:", e) }) }).catch(e => { var t = e.code, l = e.message; console.error(t, l) }) } function process_article() { liked_page ? remove_like_article(id_likes) : like_article(id_likes) } "undefined" != typeof auth && (localStorage.getItem(id) || auth.signInAnonymously().then(() => { var e = db.collection("views").doc(id); localStorage.setItem(id, !0), e.get().then(e => { e.exists ? db.collection("views").doc(id).update({ views: firebase.firestore.FieldValue.increment(1) }) : db.collection("views").doc(id).set({ views: 1 }) }).catch(e => { console.log("Error getting document:", e) }) }).catch(e => { var t = e.code, l = e.message; console.error(t, l) }), localStorage.getItem(id_likes) && (liked_page = !0, document.querySelectorAll("span[id='button_likes_heart']")[0].style.display = "", document.querySelectorAll("span[id='button_likes_emtpty_heart']")[0].style.display = "none", document.querySelectorAll("span[id='button_likes_text']")[0].innerText = ""));